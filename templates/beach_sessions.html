{% extends 'base.html' %} {% block content %}

<div>

    <h3>{{ beach.name }} Beach</h3>
        <div>
            <ul class="list-inline">
                <li><strong>Facing:</strong>{{ beach.facing }}</li>
                <li><strong>Coordinates:</strong>{{ beach.longitude }}, {{ beach.latitude }}</li>
                <li>{{ beach.notes }}</li>
            </ul>
        </div>
        
        <h3>Upcoming sessions</h3>
        {% regroup sessions by date as session_list %}
        {% for day, session_group in session_list %} 
            <strong>
                {% if day|date:"F d, Y" == today|date:"F d, Y" %}
                    Today:
                {% elif day|date:"F d, Y" == tomorrow|date:"F d, Y" %}
                    Tomorrow:
                {% elif day|date:"F d, Y" == day_after_tomorrow|date:"F d, Y" %}
                    The day after tomorrow:
                {% else %}
                xxxxxx
                    <!-- {{ today }} / {{ tomorrow }}/{{ day_after_tomorrow}} -->
                {% endif %}
                {{ day }} 
            </strong>
            {% for session in session_group %}
                <p>
                    {{ session.time }}.00 {{ session.surfer }} {{ session.date }} 
                    {% if user == session.surfer %}
                        <a href="/edit/{{ session.id }}">
                            <b>Edit this session</b>
                        </a>
                        <a href="/delete/{{ session.id }}">
                            <b>Delete this session</b>
                        </a>
                            
                    {% endif %}
                </p>
                
            {% empty %}
                <p>No sessions found for {{ day }}</p>
            {% endfor %}
        {% empty %}
            <p>No sessions found</p>
        {% endfor %}

        <h4">+ add a session</h4>
        <form method="post">
            {% csrf_token %}
            {{ session_form }}
            <button type="submit">Submit</button>
        </form>

</div> 


{% endblock %}

{% block js %}
<script>
    today = new Date();
    let minDate = today.toISOString().substring(0, 10);
    document.getElementById("id_date").setAttribute("min", minDate); 
</script>
{% endblock %}